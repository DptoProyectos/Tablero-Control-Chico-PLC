(*2*)
(* Network 0 *)
(*YCHEnvío para la visualización web el modo actual en que el PLC está trabajando*)
LD    TRUE
AND(
LD    TRUE
EQ    WorkingMode, 0
OR(
LD    TRUE
EQ    WorkingMode, 1
)
OR(
LD    TRUE
EQ    WorkingMode, 2
)
)
MOVE    WorkingMode, mReg2067
ADD    100, mReg2067
(* Network 1 *)
(*YCHMando vía modbus el que se esta trabajando en modo local*)
LD    %M101.6
ST   %V4014.0
(* Network 2 *)
(*YCHMando vía modbus el estado de la bomba*)
LD    %M101.7
ST   %V4014.1
(* Network 3 *)
(*YCHAlarma del canal analogico 0*)
LD    %M101.0
ST   %V4014.2
(* Network 4 *)
(*YCHAlarma del canal analogico 1*)
LD    %M101.3
ST   %V4014.3
(* Network 5 *)
(*YCHAlarma de falla térmicaSe activa cuando se manda a prender la salida de control cero (OC0) y no se recibe estado en la entrada de estado siempre que no se esté enmodo local*)
LDN    %M101.6
AND    %M102.3
AND    %M102.4
ANDN    %M101.7
ST   %V4014.4
(* Network 6 *)
(*YCHPongo los MSB de los registros modbus 2107 y 2108 en 0101 como validación de datos*)
LD    TRUE
R    %V4015.7
S    %V4015.6
R    %V4015.5
S    %V4015.4
R    %V4017.7
S    %V4017.6
R    %V4017.5
S    %V4017.4
(* Network 7 *)
(*YCHEnvío vía modbus la señal del del canal analógico AI_0*)
LD    TRUE
MOVE    AI0_mag, mReg2069
(* Network 8 *)
(*YCHEnvío vía modbus la señal del del canal analógico AI_1*)
LD    TRUE
MOVE    AI1_mag, mReg2071
(* Network 9 *)
(*YCHEnvío la señal de caudal*)
LD    TRUE
MOVE    Caudal, mReg2075
(* Network 10 *)
(*YCHSeñal de volumen en m3 de agua acumulado*)
LD    TRUE
MOVE    VolCau, mReg2073
(* Network 11 *)
(*YCHSeñal de kw consumidos que viene del contador de UTE*)
LD    TRUE
DI_TO_R    PulseCount1, real0
MOVE    real0, mReg2079
